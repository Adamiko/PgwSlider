/**
 * PgwSlider - Version 1.0
 *
 * Copyright 2014, Jonathan M. Piat
 * http://pgwjs.com - http://pagawa.com
 * 
 * Released under the MIT license - http://opensource.org/licenses/MIT
 */
(function(a){a.fn.pgwSlider=function(c){var h={containerHeight:300,intervalDuration:3000,transitionDuration:400};if(this.length==0){return this}else{if(this.length>1){this.each(function(){a(this).pgwSlider(c)});return this}}var e={};e.plugin=this;e.data=[];e.currentNumber=0;e.totalNumber=0;e.eventInterval=null;var i=function(){e.settings=a.extend({},h,c);b();d()};var f=function(k){var l={};var n=k.find("a").attr("href");if((typeof n!="undefined")&&(n!="")){l.link=n;var q=k.find("a").attr("target");if((typeof q!="undefined")&&(q!="")){l.linkTarget=q}}var j=k.find("img").attr("src");if((typeof j!="undefined")&&(j!="")){l.thumbnail=j}var r=k.find("img").attr("data-large-url");if((typeof r!="undefined")&&(r!="")){l.image=r}var o=k.find("span").text();if((typeof o!="undefined")&&(o!="")){l.title=o}else{var m=k.find("img").attr("data-title");if((typeof m!="undefined")&&(m!="")){l.title=m}}var p=k.find("img").attr("data-description");if((typeof p!="undefined")&&(p!="")){l.description=p}return l};var b=function(){e.plugin.prepend('<div class="current" style="height:'+e.settings.containerHeight+"px; max-height: "+e.settings.containerHeight+'px"></div>');e.totalNumber=e.plugin.find("ul li").length;var k=((e.settings.containerHeight-((e.totalNumber-1)*6))/e.totalNumber);e.plugin.find("ul li").css("height",k+"px");var l=(100/e.totalNumber);e.plugin.find("ul li").css("width",l+"%");var j=0;e.plugin.find("ul li").each(function(){var m=f(a(this));m.id=j;e.data.push(m);a(this).addClass("elt_"+m.id);if(typeof m.title!="undefined"){if(a(this).find("span").length==1){if(a(this).find("span").text()==""){a(this).find("span").text(m.title)}}else{a(this).find("img").after("<span>"+m.title+"</span>")}}a(this).css("cursor","pointer").click(function(n){n.preventDefault();g(m.id)});j++});e.plugin.on("mouseenter",function(){clearInterval(e.eventInterval);e.eventInterval=null});e.plugin.on("mouseleave",function(){d()});g(0);e.plugin.removeClass("init");e.plugin.animate({opacity:1},400)};var g=function(j){e.currentNumber=j;var l=e.data[j];var k=e.plugin.find("div");k.animate({opacity:0},e.settings.transitionDuration,function(){e.plugin.find("ul li").css("opacity","0.6");e.plugin.find("ul li.elt_"+j).css("opacity","1");if(typeof l.image!="undefined"){k.html('<img src="'+l.image+'"/>')}else{if(typeof l.thumbnail!="undefined"){k.html('<img src="'+l.thumbnail+'"/>')}else{k.html("")}}var m="";if(typeof l.title!="undefined"){m+="<b>"+l.title+"</b>"}if(typeof l.description!="undefined"){if(m!=""){m+="<br/>"}m+=l.description}if(m!=""){k.append("<span>"+m+"</span>")}if(typeof l.link!="undefined"){var n="";if(typeof l.linkTarget!="undefined"){var n='target="'+l.linkTarget+'"'}k.html('<a href="'+l.link+'" '+n+">"+k.html()+"</a>")}k.animate({opacity:1},e.settings.transitionDuration)})};var d=function(){e.eventInterval=setInterval(function(){var k=e.totalNumber-1;if(e.currentNumber+1<=k){var j=e.currentNumber+1}else{var j=0}g(j)},e.settings.intervalDuration)};i();return this}})(jQuery);